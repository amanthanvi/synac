---
/* Lightweight client search island using MiniSearch and the prebuilt /search.json */
const title = 'Quick search';
import searchClientUrl from '../scripts/searchClient.ts?url';
---

<section
  role="search"
  aria-labelledby="search"
  aria-describedby="search-help"
  style="margin-top: var(--space-6)"
>
  <h2 id="search">{title}</h2>
  <div id="search-box" style="display:flex; gap:.5rem; align-items:center;">
    <label for="q" class="sr-only">Search terms</label>
    <span id="search-help" class="sr-only"
      >Type to search. Press “/” to focus. Press Escape to clear.</span
    >
    <input
      id="q"
      type="search"
      placeholder="Search terms, acronyms, tags..."
      style="flex:1; padding:.5rem .75rem; border-radius:8px; border:1px solid #2a2e35; background:transparent; color:var(--color-fg);"
      autocomplete="off"
      enterkeyhint="search"
      aria-controls="results"
      aria-autocomplete="list"
      aria-describedby="search-help"
    />
    <span
      id="count"
      role="status"
      aria-live="polite"
      aria-atomic="true"
      style="color:var(--color-muted); font-size:.9em;"></span>
  </div>

  <ul
    id="results"
    role="list"
    style="list-style:none; padding:0; margin: var(--space-4) 0 0 0; display:grid; gap:.5rem;"
  >
  </ul>
</section>

<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  .badge {
    padding: 0.1rem 0.4rem;
    border-radius: 999px;
    font-size: 0.75em;
    border: 1px solid #2a2e35;
    color: var(--color-muted);
  }
  .kind {
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    font-size: 0.75em;
    margin-left: 0.25rem;
  }
</style>

<script type="module" src={searchClientUrl}></script>
